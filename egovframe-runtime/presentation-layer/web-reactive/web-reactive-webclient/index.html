<!doctype html><html lang=kr dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>스프링 WebFlux의 WebClient와 논블로킹 처리 | 표준프레임워크 개발가이드</title><link rel=stylesheet href=https://eGovFramework.github.io/egovframe-docs/css/custom.css integrity crossorigin=anonymous><script src=https://eGovFramework.github.io/egovframe-docs/js/custom.js integrity crossorigin=anonymous defer></script></head><body><header id=krds-header><div class=header-in><div class=header-container><div class=inner style=padding-bottom:0><div class=header-branding><h2 class=logo><a href=https://eGovFramework.github.io/egovframe-docs/></a></h2><div class=header-actions><nav class=krds-main-menu style=border:none><div class=inner><ul class=gnb-menu><li><a href=/egovframe-docs/egovframe-development/ class="gnb-main-trigger is-link">개발환경(예정)</a></li><li><a href=/egovframe-docs/egovframe-runtime/ class="gnb-main-trigger is-link active">실행환경</a></li><li><a href=/egovframe-docs/runtime-example/ class="gnb-main-trigger is-link">실행환경 예제</a></li><li><a href=/egovframe-docs/common-component/ class="gnb-main-trigger is-link">공통컴포넌트(예정)</a></li><li><a href class="gnb-main-trigger is-link active">batchLayer</a></li></ul></div></nav></div></div></div></div></div></header><main id=wrap><div id=container class=krds-in-page-navigation-type><div class="inner in-between layout"><nav class=krds-side-navigation><h2 class=lnb-tit>batchLayer</h2><ul class=lnb-list role=menubar><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu0 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-setup/>Setup</button><div class=lnb-submenu><ul id=lnb-menu0 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu1 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-batch_runner/>Runner</button><div class=lnb-submenu><ul id=lnb-menu1 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu2 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-event_notice_template_mgmt/>EventNotice</button><div class=lnb-submenu><ul id=lnb-menu2 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu3 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-core-egov_commandline_runner_template/>EgovCommandLineRunner</button><div class=lnb-submenu><ul id=lnb-menu3 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu4 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-core-egov_scheduler_runner_template/>EgovSchedulerRunner</button><div class=lnb-submenu><ul id=lnb-menu4 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu5 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-pre_post_process_mgmt/>PrePostProcess</button><div class=lnb-submenu><ul id=lnb-menu5 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu6 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-retry_mgmt/>Retry</button><div class=lnb-submenu><ul id=lnb-menu6 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu7 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-repository_mgmt/>Repository</button><div class=lnb-submenu><ul id=lnb-menu7 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu8 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-job_group_mgmt/>JobGroup</button><div class=lnb-submenu><ul id=lnb-menu8 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu9 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-tasklet_mgmt/>Tasklet</button><div class=lnb-submenu><ul id=lnb-menu9 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu10 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-batch_exec_mgmt/>Log</button><div class=lnb-submenu><ul id=lnb-menu10 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu11 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi_process/>MultiProcess</button><div class=lnb-submenu><ul id=lnb-menu11 role=menu><li class=lnb-subitem><a href=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi_process/batch-example-db_partition/ class="lnb-btn lnb-link" role=menuitem>DbPartition</a></li><li class=lnb-subitem><a href=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi_process/batch-example-file_partition/ class="lnb-btn lnb-link" role=menuitem>FilePartition</a></li><li class=lnb-subitem><a href=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi_process/batch-example-single_file_partition/ class="lnb-btn lnb-link" role=menuitem>SpigntFilePartition</a></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu12 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-skip_mgmt/>Skip</button><div class=lnb-submenu><ul id=lnb-menu12 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu13 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-sync_async/>SyncAsync</button><div class=lnb-submenu><ul id=lnb-menu13 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu14 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-job_reuse/>JobReuse</button><div class=lnb-submenu><ul id=lnb-menu14 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu15 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-resource/>MultiResource</button><div class=lnb-submenu><ul id=lnb-menu15 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu16 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-db_jdbccursor/>JdbcCursor</button><div class=lnb-submenu><ul id=lnb-menu16 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu17 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-db_ibatis/>Ibatis</button><div class=lnb-submenu><ul id=lnb-menu17 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu18 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-file_fixedlength/>FixedLength</button><div class=lnb-submenu><ul id=lnb-menu18 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu19 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-file_delimitied/>Delimited</button><div class=lnb-submenu><ul id=lnb-menu19 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu20 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-composite_item/>CompositeItem</button><div class=lnb-submenu><ul id=lnb-menu20 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu21 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-multi-restart_mgmt/>Restart</button><div class=lnb-submenu><ul id=lnb-menu21 role=menu></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu22 aria-expanded=false data-url=/egovframe-docs/runtime-example/individual-example/batch-layer/batch-example-run_junit_test/>JUnitTest</button><div class=lnb-submenu><ul id=lnb-menu22 role=menu></ul></div></li></ul></ul><h2 class=lnb-tit>실행환경</h2><ul class=lnb-list role=menubar><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu0 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/intro/>실행환경 소개</button><div class=lnb-submenu><ul id=lnb-menu0 role=menu><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/intro/overview/ class="lnb-btn lnb-link" role=menuitem>OverView</a></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu1 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/foundation-layer-core/>공통기반 핵심</button><div class=lnb-submenu><ul id=lnb-menu1 role=menu><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-1 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/>
IoC Container<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-1 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer-core/>IoC Container</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-basics/>Basics</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-dependencies/>Dependencies</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-bean_scope/>Bean Scopes</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-customizing_the_nature_of_a_bean/>Customizing</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-bean-definition-profiles/>Profiles</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-bean_definition_inheritance/>Inheritance</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container_extension_points/>Extension</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-the-applicationcontext/>The ApplicationContext</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-annotation-based_configuration/>Annotation</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-classpath_scanning_for_managed_components/>Components Scan</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-jsr_330_standard_annotations/>JSR 330</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-java-based_configuration/>JavaConfig</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-enviroment_abstraction/>Environment Abstraction</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-iversion-of-control/>Inversion of Control</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/ioc-container/ioc-container-generic/>Generic</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-1 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer-core/aop/>
AOP<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-1 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer-core/>AOP</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/aop/aop-aspectj/>AspectJ</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/aop/aop-xmlschema/>AOP XML</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer-core/aop/aop-guide/>AOP 가이드라인</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer-core/resource/ class="lnb-btn lnb-link" role=menuitem>Resource</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer-core/spel/ class="lnb-btn lnb-link" role=menuitem>SpEL</a></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu2 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>공통기반</button><div class=lnb-submenu><ul id=lnb-menu2 role=menu><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/>
Server Security<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Server Security</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/server-security-architecture/>Server Security Architecture</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/server-security-authentication/>Authentication</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/server-security-authorization/>Authorization</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/server-security-simplifying-settings/>설정 간소화</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/server-security/server-security-upgrade/>Server Security 업그레이드</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/session-based-access-control-permission-settings/ class="lnb-btn lnb-link" role=menuitem>Session 방식 접근제어</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/scheduling/ class="lnb-btn lnb-link" role=menuitem>Scheduling 서비스</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/logging/>
Logging<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Logging</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/logging/logging-log4j2/>Log4j2</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/foundation-layer/logging/logging-log4j2/logging-log4j2-configuration_code/>Log4j2 코드로 설정</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/foundation-layer/logging/logging-log4j2/logging-log4j2-configuration_file/>Log4j2 파일로 설정</a></li></ul></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/logging/logging-slf4j/>SLF4J</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/id-generated/ class="lnb-btn lnb-link" role=menuitem>Id Generation 서비스</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/property/>
Property<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Property</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/property/property-service/>Property Service</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/property/property-source/>Property Source</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/environment/ class="lnb-btn lnb-link" role=menuitem>Environment</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/cache/>
Cache<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Cache</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/cache/ehCache/>EhCache</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/cache/abstraction/>Abstraction</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/marshalling-unmarshallig/ class="lnb-btn lnb-link" role=menuitem>Marshalling/Unmarshallig</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/xml-manipulation/ class="lnb-btn lnb-link" role=menuitem>XML Manipulation</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/object-pooling/ class="lnb-btn lnb-link" role=menuitem>Object Pooling</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/crypto/>
Crypto<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Crypto</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/crypto/crypto-encryption-decryption/>암복호화 서비스</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/crypto/crypto-simplification/>Crypto 간소화 서비스</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/ftp/ class="lnb-btn lnb-link" role=menuitem>FTP</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/mail/ class="lnb-btn lnb-link" role=menuitem>Mail 서비스</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/compress-decompress/>
Compress/Decompress<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>Compress/Decompress</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/compression-file-types/>압축 파일의 종류</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-2 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/foundation-layer/file-upload-download-service/>
File Upload/Download<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-2 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/foundation-layer/>File Upload/Download</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/file-upload-download-service/file-upload-service/>File Upload</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/foundation-layer/file-upload-download-service/file-upload/file-upload-service-multi-file-support/>Multipart</a></li></ul></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/foundation-layer/file-upload-download-service/file-download-service/>File Download</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/foundation-layer/file-upload-download-service/file-download/file-download-service-tomcat-encoding/>Tomcat 한글</a></li></ul></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/file-handling/ class="lnb-btn lnb-link" role=menuitem>File Handling</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/excel/ class="lnb-btn lnb-link" role=menuitem>Excel</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/foundation-layer/string-util/ class="lnb-btn lnb-link" role=menuitem>String Util</a></li></ul></div><li class="lnb-item active" role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu3 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>화면처리</button><div class=lnb-submenu><ul id=lnb-menu3 role=menu><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-3 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/>
Web Servlet<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-3 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>Web Servlet</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-spring-mvc-architecture/>MVC</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-dispatcherservlet/>DispatcherServlet</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-handlermapping/>HandlerMapping</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-spring-mvc-tag-configuration/>Tag Configuration</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-controller/>Controller</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet/web-servlet-validation/>Validation</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-3 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet-declarative-validation/>
Bean Validation<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-3 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>Bean Validation</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet-declarative-validation/web-servlet-view/>View</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-servlet-declarative-validation/web-servlet-annotationcommandmapargumentresolver/>@CommandMap</a></li></ul></div></li><li class="lnb-subitem active" role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-3 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/>
Web Reactive<span class=sr-only>열기</span></button><div class="lnb-submenu-lv2 active" id=lnbmenu-3 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>Web Reactive</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/web-reactive-reactive-core/>Reactive Core</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/web-reactive-dispatcherhandler/>DispatcherHandler</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/web-reactive-annotated-controllers/>Annotated Controllers</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/web-reactive-functional-endpoints/>Functional Endpoints</a></li><li class=active role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/web-reactive/web-reactive-webclient/>WebClient</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/ajax/ class="lnb-btn lnb-link" role=menuitem>Ajax 지원</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/internationalization/ class="lnb-btn lnb-link" role=menuitem>Internationalization</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-3 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/presentation-layer/security/>
Security<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-3 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>Security</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/security/security-jakarta-commons-validator/>Jakarta Commons Validator</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/security/security-validationa-add-rules-in-common-validator/>Validation Rule</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/ui-adaptor-service/ class="lnb-btn lnb-link" role=menuitem>UI Adaptor</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/asynchronous-request-processing/ class="lnb-btn lnb-link" role=menuitem>UI 비동기요청</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/jquery-ajax/ class="lnb-btn lnb-link" role=menuitem>jQuery Ajax</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-3 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/presentation-layer/webSocket/>
WebSocket<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-3 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/presentation-layer/>WebSocket</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/webSocket/websocket-stomp/>STOMP</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/presentation-layer/webSocket/websocket-sockjs/>SockJS</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/bootstrap/ class="lnb-btn lnb-link" role=menuitem>Bootstrap</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/uxui-controller-component/ class="lnb-btn lnb-link" role=menuitem>모바일 UX/UI</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/presentation-layer/html5-css3.0-javascript-module-app-framework-basic/ class="lnb-btn lnb-link" role=menuitem>JQuery Mobile</a></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu4 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/business-logic-layer/>업무처리</button><div class=lnb-submenu><ul id=lnb-menu4 role=menu><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/exception-handling/ class="lnb-btn lnb-link" role=menuitem>Exception Handling</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-4 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/>
Spring Web Flow<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-4 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/business-logic-layer/>Spring Web Flow</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-getting-started/>SWF Getting Started</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-getting-started-hello-world/>Hello world 예제</a></li></ul></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-configuration/>SWF Configuration</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-configuration-setting-system/>시스템 설정</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-configuration-with-spring-mvc/>MVC 연동</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-configuration-securing-flows/>Securing Flows</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-configuration-flow-managed-persistence/>Flow Managed Persistence</a></li></ul></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/>SWF Elements</a><ul class=lnb-submenu-lv3><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/swf-elements-flow-definition/>Flow 정의</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/swf-elements-expression-language/>Expression Language</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/swf-elements-rendering-views/>Rendering View</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/swf-elements-executing-actions/>Executing Actions</a></li><li role=none><a href=/egovframe-docs/egovframe-runtime/business-logic-layer/spring-web-flow/swf-elements/swf-elements-flow-inheritance/>Flow 상속</a></li></ul></li></ul></div></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu5 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>데이터처리</button><div class=lnb-submenu><ul id=lnb-menu5 role=menu><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/persistence-layer/data-source/ class="lnb-btn lnb-link" role=menuitem>DataSource</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/>
IBatis<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>IBatis</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-ibatis_configuration/>iBATIS Configuration</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-spring_ibatis_integration/>Spring-iBATIS Integration</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-data_type/>Data Type</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-parameterMap/>parameterMap</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-inline_paramters/>Inline Parameters</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-resultMap/>resultMap</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-ibatis/dataaccess-dynamic-sql/>Dynamic SQL</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis/>
MyBatis<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>MyBatis</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis/dataaccess-ibatis_vs_maybatis/>주요 변경사항</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis/dataaccess-getting_started/>시작하기</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis/dataaccess-configuration_xml/>Configuration XML</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis/dataaccess-mapper_xml_files/>Mapper XML Files</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/persistence-layer/dataaccess-mybatis-guide/ class="lnb-btn lnb-link" role=menuitem>MyBatis 적용 가이드</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/jpa-spring-data/>
JPA<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>JPA</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/jpa-spring-data/jpa-repository/>JPA Repository</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/jpa-spring-data/jpa-querymethod/>Query Method</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/mongodb/>
MongoDB<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>MongoDB</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/mongodb/mongodb-supprot3_5_1/>MongoDB support</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/mongodb/mongodb-repositories3_5_1/>Repositories</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/orm/>
ORM<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>ORM</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-entities/>Entities</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-entity_operation/>Entity Operation</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-associaion_mapping/>Association Mapping</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-query-language/>Query Language</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-native_sql/>Native SQL</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-concurrency/>Concurrency</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-cache_handling/>Cache Handling</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-fetch_strategy/>Fetch Strategy</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-spring_integration/>Spring Integration</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/orm/orm-jpa_configuration/>JPA Configuration</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/transaction/>
Transaction<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>Transaction</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/transaction/declarative/>Declarative</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/transaction/programmatic/>Programmatic</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-5 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/persistence-layer/reactive/>
Reactive<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-5 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/persistence-layer/>Reactive</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/reactive/reactive-r2dbc/>R2DBC</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/reactive/reactive-mongodb/>MongoDB</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/reactive/reactive-cassandra/>Cassandra</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/persistence-layer/reactive/reactive-redis/>Redis</a></li></ul></div></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu6 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/integration-layer/>연계통합</button><div class=lnb-submenu><ul id=lnb-menu6 role=menu><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/integration-layer/naming-service/ class="lnb-btn lnb-link" role=menuitem>Naming Service</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-6 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/integration-layer/integration-service/>
Integration Service<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-6 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/integration-layer/>Integration Service</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/integration-layer/integration-service/integration-service-metadata/>Metadata</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/integration-layer/integration-service/integration-service-api/>API</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/integration-layer/webservice/ class="lnb-btn lnb-link" role=menuitem>WebService</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/integration-layer/restful/ class="lnb-btn lnb-link" role=menuitem>Restful</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/integration-layer/webservice/cloud-data-stream/ class="lnb-btn lnb-link" role=menuitem>Cloud Data Stream</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/integration-layer/swagger/ class="lnb-btn lnb-link" role=menuitem>Swagger</a></li></ul></div><li class=lnb-item role=none><button type=button class="lnb-btn lnb-toggle" role=menuitem aria-controls=lnbmenu7 aria-expanded=false data-url=/egovframe-docs/egovframe-runtime/batch-layer/>배치처리</button><div class=lnb-submenu><ul id=lnb-menu7 role=menu><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-7 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/batch-layer/intro/>
배치 실행환경 소개<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-7 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/batch-layer/>배치 실행환경 소개</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/batch-layer/intro/batch-core-sqllite/>SQLite</a></li><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/batch-layer/intro/batch-support-logback_logging/>Logback logging</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-7 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-job/>
Job<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-7 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/batch-layer/>Job</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-job/batch-core-job_variable/>Job Variable</a></li></ul></div></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-7 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-step/>
Step<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-7 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/batch-layer/>Step</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-step/batch-core-step_variable/>Step Variable</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/itemReader/ class="lnb-btn lnb-link" role=menuitem>ItemReader</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/ItemWriter/ class="lnb-btn lnb-link" role=menuitem>ItemWriter</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/resource_variable/ class="lnb-btn lnb-link" role=menuitem>Resource Variable</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-execution-job_repository/ class="lnb-btn lnb-link" role=menuitem>JobRepository</a></li><li class=lnb-subitem role=none><button type=button class="lnb-btn lnb-toggle-popup" role=menuitem aria-controls=lnbmenu-7 aria-expanded=false aria-haspopup=true data-url=/egovframe-docs/egovframe-runtime/batch-layer/batch-execution-job_launcher/>
JobLauncher<span class=sr-only>열기</span></button><div class=lnb-submenu-lv2 id=lnbmenu-7 role=menu><button type=button class=lnb-btn-tit data-url=/egovframe-docs/egovframe-runtime/batch-layer/>JobLauncher</button><ul><li role=none><a class=lnb-btn role=menuitem href=/egovframe-docs/egovframe-runtime/batch-layer/batch-execution-job_launcher/batch-execution-remote-job_launcher/>Remote JobLauncher</a></li></ul></div></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-execution-job_runner/ class="lnb-btn lnb-link" role=menuitem>JobRunner</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-job_registry/ class="lnb-btn lnb-link" role=menuitem>JobRegistry</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-job_explorer/ class="lnb-btn lnb-link" role=menuitem>JobExplorer</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-job_operator/ class="lnb-btn lnb-link" role=menuitem>JobOperator</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-skip_repeat_retry/ class="lnb-btn lnb-link" role=menuitem>Skip/Retry/Repeat</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-multidata_process/ class="lnb-btn lnb-link" role=menuitem>MultiDataProcessing</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-history_management/ class="lnb-btn lnb-link" role=menuitem>History Management</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-example-sync_async_v3.7/ class="lnb-btn lnb-link" role=menuitem>동기/비동기 처리 예제</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-listener/ class="lnb-btn lnb-link" role=menuitem>Listener</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-parallel_process/ class="lnb-btn lnb-link" role=menuitem>병행처리</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-code_base_exception/ class="lnb-btn lnb-link" role=menuitem>CodeBaseException</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-centercut-intro/ class="lnb-btn lnb-link" role=menuitem>센터 컷(CenterCut)</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-event_notice_template_mgmt/ class="lnb-btn lnb-link" role=menuitem>이벤트알림 템플릿 관리</a></li><li class=lnb-subitem><a href=/egovframe-docs/egovframe-runtime/batch-layer/batch-core-flow_control/ class="lnb-btn lnb-link" role=menuitem>Flow Control</a></li></ul></div></li></ul></ul></ul></nav><div class=contents><nav class=krds-breadcrumb-wrap aria-label=브레드크럼><ol class=breadcrumb><li class=home><a href=https://eGovFramework.github.io/egovframe-docs/ class=txt>Home</a></li><li><a href=https://eGovFramework.github.io/egovframe-docs//egovframe-runtime/ class=txt>실행환경</a></li><li><a href=https://eGovFramework.github.io/egovframe-docs//egovframe-runtime/presentation-layer/ class=txt>화면처리</a></li><li><a href=https://eGovFramework.github.io/egovframe-docs//egovframe-runtime/presentation-layer/web-reactive/ class=txt>스프링 WebFlux와 기존 스프링 웹 프레임워크 비교</a></li></ol></nav><div class=conts-area><div class=krds-in-page-navigation-area><nav class=in-page-navigation-action><ul><li><a href=https://github.com/eGovFramework/egovframe-docs/tree/contribution/egovframe-runtime/presentation-layer/web-reactive-webclient.md class="krds-btn text small" target=_blank rel=noopener><i class="svg-icon ico_page_view"></i> 페이지 보기</a></li><li><a href=https://github.com/eGovFramework/egovframe-docs/edit/contribution/egovframe-runtime/presentation-layer/web-reactive-webclient.md class="krds-btn text small" target=_blank rel=noopener><i class="svg-icon ico_page_edit"></i> 페이지 편집</a></li><li><a href="https://github.com/eGovFramework/egovframe-docs/issues/new?title=%ec%8a%a4%ed%94%84%eb%a7%81%20WebFlux%ec%9d%98%20WebClient%ec%99%80%20%eb%85%bc%eb%b8%94%eb%a1%9c%ed%82%b9%20%ec%b2%98%eb%a6%ac" class="krds-btn text small" target=_blank rel=noopener><i class="svg-icon ico_issue"></i> 문서에 이슈 생성</a></li><li><a href=https://github.com/eGovFramework/egovframe-docs/issues/new class="krds-btn text small" target=_blank rel=noopener><i class="svg-icon ico_issue"></i> 프로젝트에 이슈 생성</a></li></ul></nav><div class=in-page-navigation-header><p class=quick-caption>이 페이지의 구성</p><p class=quick-title>스프링 WebFlux의 WebClient와 논블로킹 처리</p></div><nav class=in-page-navigation-list><ul><li><a href=#설명>설명</a><ul><li><a href=#configuration>Configuration</a></li><li><a href=#maxinmemorysize>MaxInMemorySize</a></li><li><a href=#reactor-netty>Reactor Netty</a></li><li><a href=#jetty>Jetty</a></li><li><a href=#httpcomponents>HttpComponents</a></li></ul></li><li><a href=#retrieve>retrieve()</a></li><li><a href=#exchange>Exchange</a></li><li><a href=#request-body>Request Body</a><ul><li><a href=#form-data>Form Data</a></li><li><a href=#multipart-data>Multipart Data</a></li><li><a href=#filter>Filter</a></li><li><a href=#attributes>Attributes</a></li><li><a href=#context>Context</a></li><li><a href=#synchronous-use>Synchronous Use</a></li></ul></li></ul></nav></div><div class="conts-wrap scroll-check"><h1 class=h-tit id=webclient>WebClient</h1><p>스프링 WebFlux는 리액티브, 논블로킹 HTTP 요청을 위한 WebClient를 제공한다. 웹 클라이언트는 리액티브 타입을 사용하는 함수형 API이기 때문에 선언적인(declarative) 프로그래밍이 가능하다. 웹플럭스 클라이언트와 서버는 동일한 논블로킹 코덱으로 요청, 응답을 인코딩, 디코딩한다.</p><div class="conts-wrap section-link" id=section_01><h2 class=sec-tit id=설명>설명</h2><p>WebClient는 요청을 수행하기 위해 HTTP 클라이언트 라이브러리에 처리를 위임하며 아래와 같은 기능을 기본으로 제공한다.</p><ul><li>Reactor Netty</li><li>Jetty Reactive HttpClient</li><li>Apache HttpComponents</li><li>Others can be plugged via ClientHttpConnector.</li></ul><h3 class=sec-tit id=configuration>Configuration</h3><p>WebClient는 가장 간단하게는 스태틱 팩토리 메소드로 만들 수 있다.</p><ul><li>WebClient.create()</li><li>WebClient.create(String baseUrl)</li></ul><p>위 메소드는 디폴트 세팅으로 Reactor Netty HttpClient를 사용하므로 클래스패스에 io.projectreactor.netty:reactor-netty가 있어야 한다.</p><p>다른 옵션을 사용하려면 WebClient.builder()를 사용한다.</p><ul><li>uriBuilderFactory: base URL을 커스텀한 UriBuilderFactory</li><li>defaultHeader: 모든 요청에 사용할 헤더</li><li>defaultCookie: 모든 요청에 사용할 쿠키</li><li>defaultRequest: 모든 요청을 커스텀할 Consumer</li><li>filter: 모든 요청에 사용할 클라이언트 필터</li><li>exchangeStrategies: HTTP 메시지 reader/writer 커스텀</li><li>clientConnector: HTTP 클라이언트 라이브러리 설정</li></ul><p>다음 예제는 HTTP 코덱을 설정한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>codecs</span>(configurer <span style=color:#f92672>-&gt;</span> ... )
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>WebClient는 한 번 빌드하고 나면 상태를 변경할 수 없다. 단 다음 예제와 같이 원본 인스턴스는 그대로 두고 복사해와서 설정을 추가할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client1 <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>filter</span>(filterA).<span style=color:#a6e22e>filter</span>(filterB).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient client2 <span style=color:#f92672>=</span> client1.<span style=color:#a6e22e>mutate</span>()
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>filter</span>(filterC).<span style=color:#a6e22e>filter</span>(filterD).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// client1 has filterA, filterB</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// client2 has filterA, filterB, filterC, filterD</span>
</span></span></code></pre></div><h3 class=sec-tit id=maxinmemorysize>MaxInMemorySize</h3><p>스프링 WebFlux는 애플리케이션 메모리 이슈를 방지하기 위해 코덱의 메모리 버퍼 사이즈를 제한한다. 디폴트는 256KB로 설정되어 있는데 버퍼가 부족하면 다음과 같은 에러가 보인다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>org.<span style=color:#a6e22e>springframework</span>.<span style=color:#a6e22e>core</span>.<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>buffer</span>.<span style=color:#a6e22e>DataBufferLimitException</span>: Exceeded limit on max bytes to buffer
</span></span></code></pre></div><p>다음 코드를 사용하면 모든 디폴트 코덱의 최대 버퍼 사이즈를 조절할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient webClient <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>codecs</span>(configurer <span style=color:#f92672>-&gt;</span> configurer.<span style=color:#a6e22e>defaultCodecs</span>().<span style=color:#a6e22e>maxInMemorySize</span>(2 <span style=color:#f92672>*</span> 1024 <span style=color:#f92672>*</span> 1024))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><h3 class=sec-tit id=reactor-netty>Reactor Netty</h3><p>HttpClient는 Reactor Netty 설정을 커스텀할 수 있는 간단한 설정 프리셋을 가지고 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>HttpClient httpClient <span style=color:#f92672>=</span> HttpClient.<span style=color:#a6e22e>create</span>().<span style=color:#a6e22e>secure</span>(sslSpec <span style=color:#f92672>-&gt;</span> ...);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient webClient <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>clientConnector</span>(<span style=color:#66d9ef>new</span> ReactorClientHttpConnector(httpClient))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><h4 id=resources>Resources</h4><p>기본적으로 HttpClient는 reactor.netty.http.HttpResources에 묶여 있는 Reactor Netty의 글로벌 리소스를 사용한다. 이는 이벤트 루프 쓰레드와 커넥션 풀도 포함한다.
이벤트 루프로 동시성을 제어하려면 공유 리소스를 고정해 놓고 사용하는게 좋기 때문이다. 이 모드에서는 프로세스가 종료될 때까지 공유 자원을 active 상태로 유지한다.
서버가 프로세스와 함께 중단된다면 명시적으로 리소스를 종료시킬 필요는 없다. 하지만 프로세스 내에서 서버를 시작하거나 중단할 수 있다면(예를 들어 WAR로 배포한 스프링 MVC 애플리케이션) 다음 예제처럼 스프링이 관리하는 ReactorResourceFactory 빈을 globalResources=true롤 선언해야 스프링 ApplicationContext를 닫을 때 Reactor Netty 글러벌 리소스도 종료한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ReactorResourceFactory <span style=color:#a6e22e>reactorResourceFactory</span>() {
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ReactorResourceFactory();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>원한다면 글로벌 Reactor Netty 리소스를 사용하지 않게 만들수도 있다. 하지만 아래 예제처럼 직접 모든 Reactor Netty 클라이언트와 서버 인스턴스가 공유 자원을 사용하게 만들어야 한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ReactorResourceFactory <span style=color:#a6e22e>resourceFactory</span>() {
</span></span><span style=display:flex><span>    ReactorResourceFactory factory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ReactorResourceFactory();
</span></span><span style=display:flex><span>    factory.<span style=color:#a6e22e>setUseGlobalResources</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> factory;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> WebClient <span style=color:#a6e22e>webClient</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Function<span style=color:#f92672>&lt;</span>HttpClient, HttpClient<span style=color:#f92672>&gt;</span> mapper <span style=color:#f92672>=</span> client <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Further customizations...</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    ClientHttpConnector connector <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> ReactorClientHttpConnector(resourceFactory(), mapper);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> WebClient.<span style=color:#a6e22e>builder</span>().<span style=color:#a6e22e>clientConnector</span>(connector).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=timeouts>Timeouts</h4><p>다음은 커넥션 타임아웃을 설정하는 코드다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> io.netty.channel.ChannelOption;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>HttpClient httpClient <span style=color:#f92672>=</span> HttpClient.<span style=color:#a6e22e>create</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>option</span>(ChannelOption.<span style=color:#a6e22e>CONNECT_TIMEOUT_MILLIS</span>, 10000);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient webClient <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>clientConnector</span>(<span style=color:#66d9ef>new</span> ReactorClientHttpConnector(httpClient))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>다음은 read/write 타임아웃을 설정하는 코드다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> io.netty.handler.timeout.ReadTimeoutHandler;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> io.netty.handler.timeout.WriteTimeoutHandler;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>HttpClient httpClient <span style=color:#f92672>=</span> HttpClient.<span style=color:#a6e22e>create</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>doOnConnected</span>(conn <span style=color:#f92672>-&gt;</span> conn
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>addHandlerLast</span>(<span style=color:#66d9ef>new</span> ReadTimeoutHandler(10))
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>addHandlerLast</span>(<span style=color:#66d9ef>new</span> WriteTimeoutHandler(10)));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create WebClient...</span>
</span></span></code></pre></div><p>다음은 모든 요청에 대한 타임아웃을 설정하는 코드다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>HttpClient httpClient <span style=color:#f92672>=</span> HttpClient.<span style=color:#a6e22e>create</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>responseTimeout</span>(Duration.<span style=color:#a6e22e>ofSeconds</span>(2));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create WebClient...</span>
</span></span></code></pre></div><p>다음은 특정 요청에 타임아웃을 설정하는 코드다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient.<span style=color:#a6e22e>create</span>().<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;https://example.org/path&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>httpRequest</span>(httpRequest <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        HttpClientRequest reactorRequest <span style=color:#f92672>=</span> httpRequest.<span style=color:#a6e22e>getNativeRequest</span>();
</span></span><span style=display:flex><span>        reactorRequest.<span style=color:#a6e22e>responseTimeout</span>(Duration.<span style=color:#a6e22e>ofSeconds</span>(2));
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(String.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><h3 class=sec-tit id=jetty>Jetty</h3><p>다음은 Jetty HttpClient 설정을 커스텀하는 예제이다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>HttpClient httpClient <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HttpClient();
</span></span><span style=display:flex><span>httpClient.<span style=color:#a6e22e>setCookieStore</span>(...);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient webClient <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>clientConnector</span>(<span style=color:#66d9ef>new</span> JettyClientHttpConnector(httpClient))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>HttpClient는 전용 리소스(Executor. ByteBufferPool, Scheduler)를 생성해서 기본적으로 프로세스가 종료되거나 stop()을 호출할 때까지 유지한다.</p><p>다음 예제처럼 스프링이 관리하는 JettyResourceFactory 빈을 정의하면 여러 Jetty 클라이언트(혹은 서버) 인스턴스에서 리소스를 공유할 수 있고 스프링 ApplicationContext를 닫을 때 리소스도 종료시킬 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> JettyResourceFactory <span style=color:#a6e22e>resourceFactory</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> JettyResourceFactory();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> WebClient <span style=color:#a6e22e>webClient</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    HttpClient httpClient <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HttpClient();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Further customizations...</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    ClientHttpConnector connector <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> JettyClientHttpConnector(httpClient, resourceFactory());
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> WebClient.<span style=color:#a6e22e>builder</span>().<span style=color:#a6e22e>clientConnector</span>(connector).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 class=sec-tit id=httpcomponents>HttpComponents</h3><p>다음은 Apache HttpComponents HttpClient 설정을 커스텀하는 예제이다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>HttpAsyncClientBuilder clientBuilder <span style=color:#f92672>=</span> HttpAsyncClients.<span style=color:#a6e22e>custom</span>();
</span></span><span style=display:flex><span>clientBuilder.<span style=color:#a6e22e>setDefaultRequestConfig</span>(...);
</span></span><span style=display:flex><span>CloseableHttpAsyncClient client <span style=color:#f92672>=</span> clientBuilder.<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>ClientHttpConnector connector <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HttpComponentsClientHttpConnector(client);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient webClient <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>().<span style=color:#a6e22e>clientConnector</span>(connector).<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div></div><div class="conts-wrap section-link" id=section_02><h2 class=sec-tit id=retrieve>retrieve()</h2><p>retrieve()는 response body를 받아 디코딩하는 간단한 메소드이다. 사용방법은 아래와 같다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>create</span>(<span style=color:#e6db74>&#34;https://example.org&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>ResponseEntity<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id).<span style=color:#a6e22e>accept</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>toEntity</span>(Person.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>혹은 body만 받아올 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>create</span>(<span style=color:#e6db74>&#34;https://example.org&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id).<span style=color:#a6e22e>accept</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Person.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>다음 예제처럼 응답을 객체 스트림으로도 디코딩할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Flux<span style=color:#f92672>&lt;</span>Quote<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/quotes&#34;</span>).<span style=color:#a6e22e>accept</span>(MediaType.<span style=color:#a6e22e>TEXT_EVENT_STREAM</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToFlux</span>(Quote.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>4xx 또는 5xx 응답코드를 받으면 디폴트는 WebClientResponseException 또는 각 HTTP 상태에 해당하는 WebClientResponseException.BadRequest, WebClientResponseException.NotFound 등의 하위 exception을 던진다. 다음 예제처럼 onStatus 메소드로 상태별 exception을 커스텀할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id).<span style=color:#a6e22e>accept</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>onStatus</span>(HttpStatus::is4xxClientError, response <span style=color:#f92672>-&gt;</span> ...)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>onStatus</span>(HttpStatus::is5xxServerError, response <span style=color:#f92672>-&gt;</span> ...)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Person.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div></div><div class="conts-wrap section-link" id=section_03><h2 class=sec-tit id=exchange>Exchange</h2><p>exchangeToMono() 및 exchangeToFlux() 메서드(또는 Kotlin의 awaitExchange {} 및 exchangeToFlow {})는 응답 상태에 따라 응답을 다르게 디코딩하는 등 더 많은 제어가 필요한 곳에 유용하다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> entityMono <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/1&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>accept</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>exchangeToMono</span>(response <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (response.<span style=color:#a6e22e>statusCode</span>().<span style=color:#a6e22e>equals</span>(HttpStatus.<span style=color:#a6e22e>OK</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> response.<span style=color:#a6e22e>bodyToMono</span>(Person.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Turn to error</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> response.<span style=color:#a6e22e>createException</span>().<span style=color:#a6e22e>flatMap</span>(Mono::error);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span></code></pre></div><p>위의 방법을 사용할 때는 반환된 Mono 또는 Flux가 완료된 후 응답 본문을 확인하고 소비되지 않은 경우 메모리 및 연결 누수를 방지하기 위해 해제한다. 따라서 응답은 더 이상 다운스트림에서 디코딩할 수 없다. 필요한 경우 응답을 디코딩하는 방법을 선언하는 것은 제공된 함수에 달려 있다.</p></div><div class="conts-wrap section-link" id=section_04><h2 class=sec-tit id=request-body>Request Body</h2><p>request body는 Mono, 코틀린 코루틴 Deferred 등 ReactiveAdapterRegistry에 등록된 모든 비동기 타입으로 인코딩할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> personMono <span style=color:#f92672>=</span> ... ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>contentType</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>body</span>(personMono, Person.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>다음 예제처럼 객체 스트림으로도 인코딩할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Flux<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> personFlux <span style=color:#f92672>=</span> ... ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>contentType</span>(MediaType.<span style=color:#a6e22e>APPLICATION_STREAM_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>body</span>(personFlux, Person.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>비동기 타입이 아닌 실제 값을 가지고 있다면 bodyValue를 사용한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Person person <span style=color:#f92672>=</span> ... ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons/{id}&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>contentType</span>(MediaType.<span style=color:#a6e22e>APPLICATION_JSON</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyValue</span>(person)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><h3 class=sec-tit id=form-data>Form Data</h3><p>form 데이터를 보내려면 MultiValueMap&lt;String, String>을 body로 사용해야 한다. 이 때는 FormHttpMessageWriter가 자동으로 content-type을 application/x-www-form-urlencoded로 설정한다. 다음은 MultiValueMap&lt;String, String>을 사용하는 예제이다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MultiValueMap<span style=color:#f92672>&lt;</span>String, String<span style=color:#f92672>&gt;</span> formData <span style=color:#f92672>=</span> ... ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/path&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyValue</span>(formData)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>BodyInserters를 사용하면 인라인으로 form 데이터를 만들 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.web.reactive.function.BodyInserters.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/path&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>body</span>(fromFormData(<span style=color:#e6db74>&#34;k1&#34;</span>, <span style=color:#e6db74>&#34;v1&#34;</span>).<span style=color:#a6e22e>with</span>(<span style=color:#e6db74>&#34;k2&#34;</span>, <span style=color:#e6db74>&#34;v2&#34;</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><h3 class=sec-tit id=multipart-data>Multipart Data</h3><p>multipart 데이터를 보낼 때는 MultiValueMap&lt;String, ?>을 사용해서 각 value에 part 컨텐츠를 나타내는 Object 인스턴스나 part의 컨텐츠와 헤더를 나타내는 HttpEntity를 담아야 한다. MultipartBodyBuilder를 사용하면 편리하다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MultipartBodyBuilder builder <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MultipartBodyBuilder();
</span></span><span style=display:flex><span>builder.<span style=color:#a6e22e>part</span>(<span style=color:#e6db74>&#34;fieldPart&#34;</span>, <span style=color:#e6db74>&#34;fieldValue&#34;</span>);
</span></span><span style=display:flex><span>builder.<span style=color:#a6e22e>part</span>(<span style=color:#e6db74>&#34;filePart1&#34;</span>, <span style=color:#66d9ef>new</span> FileSystemResource(<span style=color:#e6db74>&#34;...logo.png&#34;</span>));
</span></span><span style=display:flex><span>builder.<span style=color:#a6e22e>part</span>(<span style=color:#e6db74>&#34;jsonPart&#34;</span>, <span style=color:#66d9ef>new</span> Person(<span style=color:#e6db74>&#34;Jason&#34;</span>));
</span></span><span style=display:flex><span>builder.<span style=color:#a6e22e>part</span>(<span style=color:#e6db74>&#34;myPart&#34;</span>, part); <span style=color:#75715e>// Part from a server request</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MultiValueMap<span style=color:#f92672>&lt;</span>String, HttpEntity<span style=color:#f92672>&lt;?&gt;&gt;</span> parts <span style=color:#f92672>=</span> builder.<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>일반적으로는 part별로 content-type을 명시하지 않아도 된다. Content Type은 직렬화할때 쓰는 HttpMessageWriter나 Resource의 경우 파일 확장자에 따라 자동으로 결정한다. 필요하다면 빌더 part 메소드 중 MediaType을 받는 메소드를 사용하면 된다.
MultiValueMap을 만들었다면 가장 간단하게는 다음 예제처럼 body 메소드로 WebClient에 넘길 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MultipartBodyBuilder builder <span style=color:#f92672>=</span> ...;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/path&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>body</span>(builder.<span style=color:#a6e22e>build</span>())
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><p>MultiValueMap에 전형적인 form 데이터(application/x-www-form-urlencoded) 등 String이 아닌 갓이 하나라도 들어있으면 content-type을 multipart/form-data로 설정하지 않아도 된다.
MultipartBodyBuilder를 사용하면 항상 HttpEntity로 감싸주면 된다. MultipartBodyBuilder 대신 BodyInserters를 사용하면 인라인으로 multipart 컨텐츠를 만들 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.web.reactive.function.BodyInserters.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Void<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>post</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/path&#34;</span>, id)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>body</span>(fromMultipartData(<span style=color:#e6db74>&#34;fieldPart&#34;</span>, <span style=color:#e6db74>&#34;value&#34;</span>).<span style=color:#a6e22e>with</span>(<span style=color:#e6db74>&#34;filePart&#34;</span>, resource))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span></code></pre></div><h3 class=sec-tit id=filter>Filter</h3><p>다음 예제와 같이 WebClient.Builder를 통해 클라이언트 필터(ExchangeFilterFunction)를 등록하여 요청을 가로채고 수정할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>filter</span>((request, next) <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            ClientRequest filtered <span style=color:#f92672>=</span> ClientRequest.<span style=color:#a6e22e>from</span>(request)
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>header</span>(<span style=color:#e6db74>&#34;foo&#34;</span>, <span style=color:#e6db74>&#34;bar&#34;</span>)
</span></span><span style=display:flex><span>                    .<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> next.<span style=color:#a6e22e>exchange</span>(filtered);
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>필터는 인증과 같은 교차 문제에 사용할 수 있다. 다음 예제에서는 정적 팩토리 메서드를 통한 기본 인증에 필터를 사용한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>filter</span>(basicAuthentication(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;password&#34;</span>))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>필터는 기존 웹클라이언트 인스턴스를 변경하여 추가하거나 제거할 수 있으므로 원래 웹클라이언트에 영향을 주지 않는 새 웹클라이언트 인스턴스를 생성할 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import static</span> org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> webClient.<span style=color:#a6e22e>mutate</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>filters</span>(filterList <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        filterList.<span style=color:#a6e22e>add</span>(0, basicAuthentication(<span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;password&#34;</span>));
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span></code></pre></div><p>WebClient는 일련의 필터 체인을 둘러싸고 있는 얇은 외피에 ExchangeFunction이 뒤따른다. 요청을 하고 상위 수준 객체와 인코딩하기 위한 워크플로우를 제공하며 응답 콘텐츠가 항상 소비되도록 하는 데 도움이 된다.
필터가 어떤 방식으로든 응답을 처리할 때는 항상 콘텐츠를 소비하거나 웹클라이언트로 다운스트림으로 전파하여 동일한 콘텐츠를 보장할 수 있도록 각별한 주의를 기울여야 한다.
다음 예제는 미승인 상태 코드를 처리하지만 예상 여부에 관계없이 모든 응답 콘텐츠가 공개되도록 하는 필터다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> ExchangeFilterFunction <span style=color:#a6e22e>renewTokenFilter</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (request, next) <span style=color:#f92672>-&gt;</span> next.<span style=color:#a6e22e>exchange</span>(request).<span style=color:#a6e22e>flatMap</span>(response <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (response.<span style=color:#a6e22e>statusCode</span>().<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> HttpStatus.<span style=color:#a6e22e>UNAUTHORIZED</span>.<span style=color:#a6e22e>value</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> response.<span style=color:#a6e22e>releaseBody</span>()
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>then</span>(renewToken())
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>flatMap</span>(token <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                    ClientRequest newRequest <span style=color:#f92672>=</span> ClientRequest.<span style=color:#a6e22e>from</span>(request).<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> next.<span style=color:#a6e22e>exchange</span>(newRequest);
</span></span><span style=display:flex><span>                });
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Mono.<span style=color:#a6e22e>just</span>(response);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 class=sec-tit id=attributes>Attributes</h3><p>요청에 속성을 추가할 수 있다. 이 기능은 필터 체인을 통해 정보를 전달하고 특정 요청에 대한 필터의 동작에 영향을 주고자 할 때 편리하다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>filter</span>((request, next) <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;</span> usr <span style=color:#f92672>=</span> request.<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#34;myAttribute&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;https://example.org/&#34;</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>attribute</span>(<span style=color:#e6db74>&#34;myAttribute&#34;</span>, <span style=color:#e6db74>&#34;...&#34;</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>bodyToMono</span>(Void.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>모든 요청에 속성을 삽입할 수 있는 WebClient.Builder 수준에서 전역적으로 defaultRequest 콜백을 구성할 수 있으며, 이는 예를 들어 Spring MVC 애플리케이션에서 ThreadLocal 데이터를 기반으로 요청 속성을 채우는 데 사용될 수 있다.</p><h3 class=sec-tit id=context>Context</h3><p>속성은 필터 체인에 정보를 전달하는 편리한 방법을 제공하지만 현재 요청에만 영향을 준다. 중첩된 추가 요청에 전파되는 정보를 전달하려면(예를 들어 flatMap을 통해), 또는 이후에 실행되는 요청에 전파되는 정보를 전달하려면(예를 들어 concatMap을 통해) Reactor Context를 사용해야 한다.</p><p>다음 예제는 리액터 컨텍스트를 리액티브 체인의 끝에 채워 모든 작업에 적용하는 것을 보여준다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebClient client <span style=color:#f92672>=</span> WebClient.<span style=color:#a6e22e>builder</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>filter</span>((request, next) <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>        Mono.<span style=color:#a6e22e>deferContextual</span>(contextView <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>            String value <span style=color:#f92672>=</span> contextView.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;foo&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>    }))
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;https://example.org/&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(String.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>flatMap</span>(body <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// perform nested request (context propagates automatically)...</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>contextWrite</span>(context <span style=color:#f92672>-&gt;</span> context.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;foo&#34;</span>, ...));
</span></span></code></pre></div><h3 class=sec-tit id=synchronous-use>Synchronous Use</h3><p>WebClient는 마지막에 결과를 블로킹하면 동기(synchronous)로 결과를 가져온다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Person person <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/person/{id}&#34;</span>, i).<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToMono</span>(Person.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>block</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> persons <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/persons&#34;</span>).<span style=color:#a6e22e>retrieve</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>bodyToFlux</span>(Person.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>collectList</span>()
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>block</span>();
</span></span></code></pre></div><p>하지만 API를 여러번 호출하면 각 응답을 따로 블로킹하기보다는 전체 결과를 합쳐서 기다리는게 더 효율적이다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> personMono <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/person/{id}&#34;</span>, personId)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>().<span style=color:#a6e22e>bodyToMono</span>(Person.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mono<span style=color:#f92672>&lt;</span>List<span style=color:#f92672>&lt;</span>Hobby<span style=color:#f92672>&gt;&gt;</span> hobbiesMono <span style=color:#f92672>=</span> client.<span style=color:#a6e22e>get</span>().<span style=color:#a6e22e>uri</span>(<span style=color:#e6db74>&#34;/person/{id}/hobbies&#34;</span>, personId)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>retrieve</span>().<span style=color:#a6e22e>bodyToFlux</span>(Hobby.<span style=color:#a6e22e>class</span>).<span style=color:#a6e22e>collectList</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Map<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> data <span style=color:#f92672>=</span> Mono.<span style=color:#a6e22e>zip</span>(personMono, hobbiesMono, (person, hobbies) <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>&lt;</span>String, String<span style=color:#f92672>&gt;</span> map <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedHashMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;person&#34;</span>, person);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;hobbies&#34;</span>, hobbies);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> map;
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>block</span>();
</span></span></code></pre></div><p>위 코드는 단지 한 가지 예시일 뿐이다. 요청이 끝날때까지 블로킹 하지 않고 리액티브 파이프라인을 구축해서 상호독립적으로 원격 호출을 여러번 실행하는 다른 패턴과 연산자도 많다.</p><pre tabindex=0><code>스프링 MVC나 WebFlux 컨트롤러에서 Flux나 Mono를 사용한다면 블로킹할 필요가 없다. 단순히 컨트롤러 메소드에서 리액티브 타입을 리턴하기만 하면 된다. 코틀린 코루틴과 스프링 WebFlux에서도 마찬가지다. 컨트롤러 메소드에서 suspend 함수를 사용하거라 Flow를 리턴하면 된다.
</code></pre><p>참고자료</p><ul><li><a class="krds-btn medium text" href=https://docs.spring.io/spring-framework/docs/5.3.27/reference/html/web-reactive.html#webflux-client>TThe Spring Framework - Web Reactive - WebClient<i class="svg-icon ico-go"></i></a></li></ul></div></div></div></div></div><button class="page-top-button krds-tooltip active" type=button data-tooltip="페이지 상단으로 이동" aria-labelledby=tooltip-popover-0aha8scb><i class="svg-icon ico-go-top"></i></button></div></main><footer id=krds-footer><div class=inner><div class=f-logo></div><div class=f-cnt><div class=f-info><ul class=info-cs><li><strong class=strong>대표전화</strong><span class=span>&nbsp; 1566-3598 (070-4448-2678)</span></li><li><strong class=strong>대표문의메일</strong><span class=span>&nbsp; egovframesupport@gmail.com</span></li></ul></div><div class=f-link><div class=link-go><a href=https://www.egovframe.go.kr/ class="krds-btn medium text" target=_blank title="새 창 열림">전자정부 표준프레임워크 <i class="svg-icon ico-go"></i></a>
<a href=https://github.com/eGovFramework/egovframe-docs class="krds-btn medium text" target=_blank title="새 창 열림">Git <i class="svg-icon ico-go"></i></a></div></div></div><div class=f-btm><div class=f-btm-text><div class=f-menu><a href="https://github.com/eGovFramework/egovframe-docs?tab=readme-ov-file" class="krds-btn small text">이용 안내</a>
<a href="https://www.egovframe.go.kr/home/sub.do?menuNo=23" class="krds-btn small text">라이센스</a></div><p class=f-copy>COPYRIGHT (C) 2024 eGovFramework. ALL RIGHTS RESERVED.</p></div></div></div></footer></body></html>